area: "staging"
vertical: "yelp_db"
table: "table_category"
version: "1.0"
partition_columns:
  - partition_column1
  - partition_column1
variables:
  - table_variable1
  - table_variable2
  - Source_Variable1
  - Source_Variable2

parallelism: 1   # Batches at the same time / 0 & 1 means single run at a time
max_bulk_size: 1
sources:
  - connection_name: "yelp_mysql"
    path: category  # On DB
    format: jdbc
    version: "1.0"
    parallel_load:
      query: "SELECT ID FROM category WHERE col1 = '$source_variable1$' AND col2 = '$source_variable2$'"
      column: "ID"
      num: 4
    select:
      query: "SELECT * FROM category WHERE col1 = '$source_variable1$' AND col2 = '$source_variable2$'"

targets:
  - connection_name: "local_fs_lake"
    format: "parquet"

  - connection_name: "redshift1"
    format: "redshift"
    table_name: "myschema.dummy_table"