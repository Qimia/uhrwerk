connections:
- name: "tpcdi_mysql"
  jdbc:
    jdbc_url: 'jdbc:mysql://127.0.0.1:63306/db_uhrwerk_generator'
    jdbc_driver: 'com.mysql.cj.jdbc.Driver'
    user: root
    pass: password2

- name: "local_fs_lake"
  file:
    path: './example_datalake'

tables:
- area: "staging"
  vertical: "tpcdi"
  table: "accounts"
  version: "1.0"
  class_name: "io.qimia.uhrwerk.example.TPCDI.ClassLoader"
  parallelism: 1   # Batches at the same time / 0 & 1 means single run at a time
  max_bulk_size: 2
  partition:
    unit: "days"
    size: 1

  sources:
  - connection_name: "tpcdi_mysql"
    path: "Accounts"
    format: "jdbc"
    version: "1.0"
    partition:
      unit: "days"
      size: 1
    select:
      query: "SELECT * FROM <path> WHERE _ActionTS >= '<lower_bound>' and _ActionTS < '<upper_bound>';"
      column: "_ActionTS"

  targets:
  - connection_name: "local_fs_lake"
    format: "parquet"

- area: "staging"
  vertical: "tpcdi"
  table: "DIM_StatusType"
  version: "1.0"
  class_name: "io.qimia.uhrwerk.example.TPCDI.ClassLoader"
  parallelism: 1   # Batches at the same time / 0 & 1 means single run at a time
  max_bulk_size: 2

  sources:
  - connection_name: "tpcdi_mysql"
    path: "DIM_StatusType"
    format: "jdbc"
    version: "1.0"
    select:
      query: "SELECT * FROM DIM_StatusType;"

  targets:
  - connection_name: "local_fs_lake"
    format: "parquet"